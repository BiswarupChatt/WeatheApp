<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather App</title>
</head>

<body>
    <h1>Weather App</h1>
    <form onsubmit="handleSubmit(event)">
        <label for="enter-city">Enter City Name</label>
        <input type="text" id="enter-city">
        <br>
        <br>
        <label> Select Unit</label> <br>

        <input type="radio" id="celcious" name="unit" checked="checked"> <label for="celcious">Celcious</label>
        <input type="radio" id="farenhite" name="unit"> <label for="farenhite">Farenhite</label>
        <br>
        <br>
        <input type="submit">
    </form>

    <h2 id="temp"></h2>
    <h3 id='max-temp'></h3>
    <h3 id='min-temp'></h3>

    <script>
        function handleSubmit(event) {
            event.preventDefault()
            const cityName = event.target[0].value
            // console.log(cityName)
            const apiId = '61a13027ddcdf83b8936e94ec232b2ff'
            const url = `https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=${apiId}`
            // console.log(url)
            const xhr = new XMLHttpRequest()
            xhr.open('GET', url)
            xhr.send()
            xhr.onload = function () {
                const weather = JSON.parse(xhr.responseText)
                // console.log(weather.main.temp)
                const handleFarenhite = document.getElementById('farenhite')
                const handleCelcious = document.getElementById('celcious')
                const tempHandle = document.getElementById('temp')
                const maxTempHandle = document.getElementById('max-temp')
                const minTempHandle = document.getElementById('min-temp')
                const kelvinToFarenhiteTemp = ((weather.main.temp - 273.15) * (9 / 5) + 32).toFixed(2)
                const kelvinToCelciousTemp = (weather.main.temp - 273.15).toFixed(2)
                const kelvinToFarenhiteMaxTemp = ((weather.main.temp_max - 273.15) * (9 / 5) + 32).toFixed(2)
                const kelvinToFarenhiteMinTemp = ((weather.main.temp_min - 273.15) * (9 / 5) + 32).toFixed(2)
                const kelvinToCelciousMaxTemp = (weather.main.temp_max - 273.15).toFixed(2)
                const kelvinToCelciousMinTemp = (weather.main.temp_min - 273.15).toFixed(2)

                // tempHandle.innerHTML = `temperature is ${weather.main.temp}`

                if (handleFarenhite.checked == true) {
                    tempHandle.innerHTML = `The current temperature of ${cityName} is ${kelvinToFarenhiteTemp}° farenhite. `
                    maxTempHandle.innerHTML = `Maximum temperature is ${kelvinToFarenhiteMaxTemp}° farenhite.`
                    minTempHandle.innerHTML = `Minimum temperature is ${kelvinToFarenhiteMinTemp}° farenhite.`
                } else if (handleCelcious.checked == true) {
                    tempHandle.innerHTML = `The current temperature of ${cityName} is  ${kelvinToCelciousTemp}° celcious`
                    maxTempHandle.innerHTML = `Maximum temperature is ${kelvinToCelciousMaxTemp}° celcious`
                    minTempHandle.innerHTML = `Minimum temperature is ${kelvinToCelciousMinTemp}° celcious`
                }
            }
        }
    </script>


</body>

</html>
